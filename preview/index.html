<!doctype html>
<!-- =========================================================
  Tap-Deck â€” Theme Preview
  File: /preview/index.html

  Used by:
  - Theme gallery thumbnail iframe
  - Full preview button

  Accepts:
  ?theme=filename.css
  ?embed=1 (hides header for thumbnails)
  Other optional params:
  businessName, tagline, about,
  website, facebook, instagram, tiktok,
  linkedin, paypal, cashapp, venmo,
  name, phone, email
========================================================= -->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tap-Deck Preview</title>

  <!-- Base layout -->
  <link rel="stylesheet" href="/base.css">
  <!-- Theme will load dynamically -->
  <link rel="stylesheet" id="themeStylesheet" href="">
</head>

<body>
  <main class="wrap" id="app">
    <div id="headerBlock">
      <h1>Preview Mode</h1>
      <div class="tagline">This is a live preview of the selected theme.</div>
    </div>

    <div id="profileContent"></div>
  </main>

<script>
/* =========================================================
   Helpers
========================================================= */
function $(id){ return document.getElementById(id); }

function getParam(name){
  return new URLSearchParams(location.search).get(name) || "";
}

function createButton(label, url){
  if (!url) return null;
  const a = document.createElement("a");
  a.href = url;
  a.className = "btn";
  a.target = "_blank";
  a.rel = "noopener";
  a.textContent = label;
  return a;
}

/* =========================================================
   Load Theme
========================================================= */
const theme = getParam("theme");
if (theme){
  $("themeStylesheet").href = "/themes/" + theme;
}

/* =========================================================
   Hide header in embed mode
========================================================= */
if (getParam("embed") === "1"){
  $("headerBlock").style.display = "none";
}

/* =========================================================
   Build Preview Profile
========================================================= */
const content = $("profileContent");

// Sample or provided data
const profile = {
  businessName: getParam("businessName") || "Your Business Name",
  tagline: getParam("tagline") || "Your Tagline Here",
  about: getParam("about") || "This is a preview of how your profile will look.",
  links: {
    website: getParam("website"),
    facebook: getParam("facebook"),
    instagram: getParam("instagram"),
    tiktok: getParam("tiktok"),
    linkedin: getParam("linkedin"),
    paypal: getParam("paypal"),
    cashapp: getParam("cashapp"),
    venmo: getParam("venmo"),
  }
};

// Business Name
const h1 = document.createElement("h1");
h1.textContent = profile.businessName;
content.appendChild(h1);

// Tagline
if (profile.tagline){
  const t = document.createElement("div");
  t.className = "tagline";
  t.textContent = profile.tagline;
  content.appendChild(t);
}

// About
if (profile.about){
  const a = document.createElement("div");
  a.className = "about";
  a.textContent = profile.about;
  content.appendChild(a);
}

// Buttons
const grid = document.createElement("div");
grid.className = "buttons";

const buttons = [
  createButton("Website", profile.links.website),
  createButton("Facebook", profile.links.facebook),
  createButton("Instagram", profile.links.instagram),
  createButton("TikTok", profile.links.tiktok),
  createButton("LinkedIn", profile.links.linkedin),
  createButton("PayPal", profile.links.paypal),
  createButton("Cash App", profile.links.cashapp),
  createButton("Venmo", profile.links.venmo),
].filter(Boolean);

buttons.forEach(btn => grid.appendChild(btn));

// If odd number, center last
if (buttons.length % 2 === 1){
  buttons[buttons.length - 1].classList.add("full");
}

content.appendChild(grid);
</script>
</body>
</html>